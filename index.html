<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="/favicon-32x32.png" sizes="32x32" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180" />

  <!-- Podstawowe meta (nadpisywane przez JS) -->
  <title>ForgeMotion Systems</title>
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <meta name="author" content="" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="" />

  <!-- Open Graph -->
  <meta property="og:title" content="" />
  <meta property="og:description" content="" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />
  <meta property="og:image" content="" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    html { scroll-padding-top: 90px; }

    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 1s forwards;
    }
    @keyframes fadeInUp {
      to { opacity: 1; transform: translateY(0); }
    }

    .bg-wrap {
      position: relative;
      background-color: #0b1220;
      background-image: url('/images/hero-forge.png');
      background-repeat: no-repeat;
      background-position: left top;
      background-size: contain;
      overflow: hidden;
    }

    .bg-wrap::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: linear-gradient(
        to bottom,
        rgba(6,10,18,0.08) 0%,
        rgba(6,10,18,0.26) 40%,
        rgba(6,10,18,0.62) 100%
      );
      z-index: 0;
    }

    .bg-wrap::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(
        circle at 50% 100%,
        rgba(6,10,18,0.58),
        rgba(6,10,18,0.0) 55%
      );
      z-index: 0;
    }

    .bg-inner { position: relative; z-index: 1; }

    @media (max-width: 768px) {
      .bg-wrap { background-size: 145% auto; background-position: left 18%; }
      .bg-wrap::before {
        background: linear-gradient(
          to bottom,
          rgba(6,10,18,0.04) 0%,
          rgba(6,10,18,0.18) 40%,
          rgba(6,10,18,0.52) 100%
        );
      }
      .bg-wrap::after {
        background: radial-gradient(
          circle at 50% 100%,
          rgba(6,10,18,0.46),
          rgba(6,10,18,0.0) 60%
        );
      }
    }

    @media (min-width: 1024px) {
      .bg-wrap { background-size: contain; background-position: left 6%; }
    }

    @media (min-width: 1024px) and (max-height: 820px) {
      .bg-wrap { background-position: left 10%; }
    }

    .hero-panel {
      position: absolute;
      left: 0; right: 0;
      margin-left: auto; margin-right: auto;
      width: min(980px, calc(100% - 2rem));
    }

    @media (min-width: 1024px) { .hero-panel { top: 62vh; } }
    @media (max-width: 768px) { .hero-panel { top: 56vh; } }

    /* ====== Product cards ====== */
    .product-card {
      background: rgba(31, 41, 55, 0.9);
      border-radius: 0.75rem;
      padding: 1rem;
      text-align: center;
      transition: transform 0.25s ease;
      backdrop-filter: blur(1px);
      border: 1px solid rgba(255,255,255,0.05);
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    .product-card:hover { transform: scale(1.03); }

    .product-title {
      font-size: 1.2rem;
      font-weight: 650;
      margin-bottom: 0.35rem;
    }

    .product-desc {
      color: rgba(255,255,255,0.9);
      margin-bottom: 0.75rem;
      min-height: 3.4rem;
    }

    .product-cta-row {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 0.75rem;
    }
    .product-cta {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 0.55rem;
      padding: 0.55rem 0.85rem;
      font-weight: 650;
      font-size: 0.95rem;
      border: 1px solid rgba(255,255,255,0.12);
      transition: background 0.2s ease, transform 0.2s ease;
      background: rgba(255,255,255,0.06);
    }
    .product-cta:hover { background: rgba(255,255,255,0.10); transform: translateY(-1px); }

    .product-cta.primary { background: rgba(59,130,246,0.95); border-color: rgba(59,130,246,0.95); }
    .product-cta.primary:hover { background: rgba(37,99,235,0.98); }

    .product-image {
      width: 100%;
      height: 190px;
      overflow: hidden;
      border-radius: 0.5rem;
      background: rgba(0,0,0,0.18);
      margin-top: auto;
    }
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: zoom-in;
      transform: scale(1.01);
      transition: transform 0.25s ease;
      display: block;
    }
    .product-card:hover .product-image img { transform: scale(1.05); }

    /* Ejection Seat thumb contain */
    .product-image img.thumb-contain {
      object-fit: contain !important;
      object-position: center bottom;
      transform: none !important;
      background: rgba(0,0,0,0.12);
      padding: 6px;
      cursor: zoom-in;
    }
    .product-card:hover .product-image img.thumb-contain { transform: none !important; }

    /* ====== Modal ====== */
    .modal-hidden { display: none; }
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.72);
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    .modal-panel {
      width: min(1100px, 96vw);
      max-height: 90vh;
      background: rgba(17, 24, 39, 0.96);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 20px 70px rgba(0,0,0,0.5);
      position: relative;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 999px;
      width: 40px;
      height: 40px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .modal-close:hover { background: rgba(255,255,255,0.18); }
    .modal-img-wrap { padding: 0.75rem; }
    .modal-img {
      width: 100%;
      height: auto;
      max-height: calc(90vh - 1.5rem);
      object-fit: contain;
      border-radius: 0.75rem;
      display: block;
    }
    .modal-hint {
      padding: 0 0.95rem 0.95rem 0.95rem;
      color: rgba(255,255,255,0.75);
      font-size: 0.95rem;
      text-align: center;
    }
    .sr-only {
      position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
    }
  </style>
</head>

<body class="bg-gray-900 text-white font-sans">

<header class="bg-gray-800/90 backdrop-blur border-b border-white/5 fixed w-full z-10 shadow-md">
  <div class="container mx-auto px-4 py-3 flex items-center justify-between gap-4">
    <a href="/index.html#hero" class="flex items-center" aria-label="Go to home section">
      <img
        src="/logo.png"
        alt="ForgeMotion Systems logo"
        class="w-auto object-contain shrink-0 h-[clamp(34px,4.5vw,64px)]"
        loading="eager"
      />
    </a>

    <div class="hidden md:flex items-center gap-8">
      <nav aria-label="Primary navigation">
        <ul class="flex items-center gap-8">
          <li><a href="#hero" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1" data-en="Home" data-pl="Strona główna"></a></li>
          <li><a href="#products" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1" data-en="Products" data-pl="Produkty"></a></li>
          <li><a href="#about" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1" data-en="About" data-pl="O nas"></a></li>
          <li><a href="#contact" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1" data-en="Contact" data-pl="Kontakt"></a></li>
        </ul>
      </nav>

      <div class="flex items-center gap-2 text-sm">
        <button type="button" data-lang="en" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1">EN</button>
        <span class="text-gray-400">|</span>
        <button type="button" data-lang="pl" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1">PL</button>
      </div>
    </div>

    <div class="flex md:hidden items-center gap-3">
      <div class="flex items-center gap-2 text-sm">
        <button type="button" data-lang="en" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1">EN</button>
        <span class="text-gray-400">|</span>
        <button type="button" data-lang="pl" class="hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/60 rounded px-1">PL</button>
      </div>

      <button
        id="mobileMenuBtn"
        type="button"
        class="inline-flex items-center justify-center rounded p-2 hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-blue-400/60"
        aria-controls="mobileMenu"
        aria-expanded="false"
        aria-label="Open menu"
      >
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
  </div>

  <div id="mobileMenu" class="md:hidden hidden border-t border-white/5 bg-gray-800/95 backdrop-blur">
    <nav class="container mx-auto px-4 py-3" aria-label="Mobile navigation">
      <ul class="flex flex-col gap-2">
        <li><a href="#hero" class="mobile-link block rounded px-3 py-2 hover:bg-white/10 hover:text-blue-400" data-en="Home" data-pl="Strona główna"></a></li>
        <li><a href="#products" class="mobile-link block rounded px-3 py-2 hover:bg-white/10 hover:text-blue-400" data-en="Products" data-pl="Produkty"></a></li>
        <li><a href="#about" class="mobile-link block rounded px-3 py-2 hover:bg-white/10 hover:text-blue-400" data-en="About" data-pl="O nas"></a></li>
        <li><a href="#contact" class="mobile-link block rounded px-3 py-2 hover:bg-white/10 hover:text-blue-400" data-en="Contact" data-pl="Kontakt"></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="bg-wrap">
  <div class="bg-inner">

    <section id="hero" class="fade-in relative min-h-[100vh] lg:min-h-[110vh] p-4 pt-24 md:pt-28">
      <div class="hero-panel">
        <div class="rounded-2xl px-4 md:px-6 py-6 md:py-7 bg-black/20 backdrop-blur-[2px]">
          <h1 class="text-4xl md:text-6xl font-bold mb-4 drop-shadow-[0_2px_24px_rgba(0,0,0,0.55)]"
              data-en="Precision Motion Systems for Racing & Flight Simulators"
              data-pl="Precyzyjne systemy motion do symulatorów wyścigowych i lotniczych"></h1>

          <p class="text-lg md:text-2xl mb-6 text-white/90 drop-shadow-[0_2px_18px_rgba(0,0,0,0.55)]"
             data-en="Motion platforms and simulator gear built for immersion — from the first lap to the final approach."
             data-pl="Platformy motion i osprzęt do symulatorów — immersja od pierwszego okrążenia po ostatnie podejście."></p>

          <a href="#products" class="inline-block bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded font-semibold">
            <span data-en="View products" data-pl="Zobacz produkty"></span>
          </a>
        </div>
      </div>
    </section>

    <section id="products" class="py-16 px-4">
      <div class="container mx-auto">
        <h2 class="text-3xl font-bold mb-8 text-center" data-en="Our Products" data-pl="Nasze Produkty"></h2>

        <div class="grid md:grid-cols-2 lg:grid-cols-5 gap-8">

          <!-- 1) 6DOF -->
          <div class="product-card">
            <h3 class="product-title" data-en="6DOF Motion Platform" data-pl="Platforma Motion 6DOF"></h3>
            <p class="product-desc"
               data-en="Full-immersion motion — smooth, natural cues for premium sims."
               data-pl="Pełna immersja ruchu — płynne, naturalne bodźce dla topowych simów."></p>

            <div class="product-cta-row">
              <a class="product-cta primary" href="/products-6dof.html" data-en="Learn more" data-pl="Zobacz więcej"></a>
              <a class="product-cta" href="/index.html#contact" data-en="Get a quote" data-pl="Wycena"></a>
            </div>

            <div class="product-image">
              <img src="/images/rama6dof1.jpg"
                   data-full="/images/rama6dof1-large.jpg"
                   alt="6DOF motion platform (frame)"
                   loading="lazy" decoding="async">
            </div>
          </div>

          <!-- 2) 3DOF / 2DOF -->
          <div class="product-card">
            <h3 class="product-title" data-en="3DOF / 2DOF Platform" data-pl="Platforma 3DOF / 2DOF"></h3>
            <p class="product-desc"
               data-en="Big immersion in a compact setup — ideal for home rigs and sim centers."
               data-pl="Mocne wrażenia w kompaktowym układzie — do domowych rigów i sim centerów."></p>

            <div class="product-cta-row">
              <a class="product-cta primary" href="/products-3dof.html" data-en="Learn more" data-pl="Zobacz więcej"></a>
              <a class="product-cta" href="/index.html#contact" data-en="Get a quote" data-pl="Wycena"></a>
            </div>

            <div class="product-image">
              <img src="/images/rama3dof1.jpg"
                   data-full="/images/rama3dof1-large.jpg"
                   alt="3DOF motion platform (frame)"
                   loading="lazy" decoding="async">
            </div>
          </div>

          <!-- 3) MK14 -->
          <div class="product-card">
            <h3 class="product-title" data-en="Ejection Seat MK14 Replica" data-pl="Replika fotela MK14"></h3>
            <p class="product-desc"
               data-en="Cockpit centerpiece — instant authenticity and wow effect."
               data-pl="Serce kokpitu — autentyczność i efekt „wow” od pierwszej sekundy."></p>

            <div class="product-cta-row">
              <a class="product-cta primary" href="/products-mk14.html" data-en="Learn more" data-pl="Zobacz więcej"></a>
              <a class="product-cta" href="/index.html#contact" data-en="Get a quote" data-pl="Wycena"></a>
            </div>

            <div class="product-image">
              <img class="thumb-contain"
                   src="/images/mk14seat1.jpg"
                   data-full="/images/mk14seat1-large.jpg"
                   alt="Ejection seat replica (MK14)"
                   loading="lazy" decoding="async">
            </div>
          </div>

          <!-- 4) Seat Belt -->
          <div class="product-card">
            <h3 class="product-title" data-en="Seat Belt Tensioner" data-pl="Napinacz pasów"></h3>
            <p class="product-desc"
               data-en="Feel braking and acceleration through physical belt feedback."
               data-pl="Poczuj hamowanie i przyspieszenie dzięki feedbackowi na pasach."></p>

            <div class="product-cta-row">
              <a class="product-cta primary" href="/index.html#contact" data-en="Ask for details" data-pl="Zapytaj o szczegóły"></a>
              <a class="product-cta" href="/index.html#contact" data-en="Get a quote" data-pl="Wycena"></a>
            </div>

            <div class="product-image">
              <img src="/images/seatbelt.jpg"
                   data-full="/images/seatbelt.jpg"
                   alt="Seat belt tensioner for simulator"
                   loading="lazy" decoding="async">
            </div>
          </div>

          <!-- 5) Accessories -->
          <div class="product-card">
            <h3 class="product-title" data-en="Simulator Accessories" data-pl="Akcesoria"></h3>
            <p class="product-desc"
               data-en="Mounts and add-ons that make your rig feel like a finished product."
               data-pl="Mocowania i dodatki, dzięki którym rig wygląda jak gotowy produkt."></p>

            <div class="product-cta-row">
              <a class="product-cta primary" href="/index.html#contact" data-en="Describe your build" data-pl="Opisz rig"></a>
              <a class="product-cta" href="/index.html#contact" data-en="Get a quote" data-pl="Wycena"></a>
            </div>

            <div class="product-image">
              <img src="/images/ejection-seat.jpg"
                   data-full="/images/ejection-seat.jpg"
                   alt="Simulator accessories"
                   loading="lazy" decoding="async">
            </div>
          </div>

        </div>
      </div>
    </section>

  </div>
</div>

<section id="about" class="bg-gray-800 py-16 px-4">
  <div class="container mx-auto text-center">
    <h2 class="text-3xl font-bold mb-6" data-en="About Us" data-pl="O nas"></h2>
    <p class="text-gray-300 max-w-2xl mx-auto"
       data-en="ForgeMotion Systems designs and manufactures motion platforms and simulator equipment for racing and aviation enthusiasts."
       data-pl="ForgeMotion Systems projektuje i produkuje platformy motion oraz osprzęt do symulatorów dla fanów wyścigów i lotnictwa."></p>
  </div>
</section>

<section id="contact" class="container mx-auto py-16 px-4">
  <h2 class="text-3xl font-bold mb-6 text-center" data-en="Contact" data-pl="Kontakt"></h2>
  <p class="text-center text-gray-300 mb-6"
     data-en="Tell us what you’re building — we’ll help you choose the right setup and prepare a quote."
     data-pl="Opisz, co budujesz — pomożemy dobrać zestaw i przygotujemy wycenę."></p>
  <form class="max-w-xl mx-auto bg-gray-800 rounded p-6 flex flex-col gap-4">
    <input type="text" placeholder="Name / Imię" class="p-3 rounded bg-gray-700">
    <input type="email" placeholder="Email" class="p-3 rounded bg-gray-700">
    <textarea placeholder="Message / Wiadomość" class="p-3 rounded bg-gray-700"></textarea>
    <button class="bg-blue-500 hover:bg-blue-600 px-6 py-3 rounded font-semibold" data-en="Send message" data-pl="Wyślij wiadomość"></button>
  </form>
</section>

<footer class="bg-gray-900 py-6 text-center text-gray-400">
  © 2025 ForgeMotion Systems
</footer>

<!-- ===== Modal HTML (image preview) ===== -->
<div id="imgModal" class="modal-hidden" aria-hidden="true">
  <div class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="imgModalTitle">
    <div class="modal-panel">
      <button id="imgModalClose" class="modal-close" type="button" aria-label="Close image">
        <span aria-hidden="true">✕</span>
      </button>
      <h2 id="imgModalTitle" class="sr-only">Image preview</h2>
      <div class="modal-img-wrap">
        <img id="imgModalImg" class="modal-img" src="" alt="">
      </div>
      <div class="modal-hint"
           data-en="Tip: click outside the image or press ESC to close."
           data-pl="Wskazówka: kliknij poza zdjęciem lub naciśnij ESC, aby zamknąć."></div>
    </div>
  </div>
</div>

<script>
  const metaData = {
    en: {
      title: "ForgeMotion Systems – Motion platforms & simulator gear",
      description: "Motion platforms and simulator gear for racing & flight enthusiasts: 6DOF, 3DOF/2DOF, ejection seat replicas and more.",
      keywords: "motion platform, 6DOF, 3DOF, 2DOF, racing simulator, flight simulator, ejection seat replica, simulator accessories",
      ogTitle: "ForgeMotion Systems – Motion platforms & simulator gear",
      ogDescription: "Motion platforms and simulator gear for racing & flight enthusiasts.",
      ogImage: "https://forgemotionsystems.com/images/og-en.jpg",
      twitterTitle: "ForgeMotion Systems – Motion platforms & simulator gear",
      twitterDescription: "Motion platforms and simulator gear for racing & flight enthusiasts.",
      twitterImage: "https://forgemotionsystems.com/images/twitter-en.jpg",
      canonical: "https://forgemotionsystems.com/en"
    },
    pl: {
      title: "ForgeMotion Systems – Platformy motion i osprzęt do symulatorów",
      description: "Platformy motion i osprzęt do symulatorów dla fanów wyścigów i lotnictwa: 6DOF, 3DOF/2DOF, repliki foteli katapultowych i więcej.",
      keywords: "platforma motion, 6DOF, 3DOF, 2DOF, symulator wyścigowy, symulator lotniczy, replika fotela katapultowego, akcesoria do symulatorów",
      ogTitle: "ForgeMotion Systems – Platformy motion i osprzęt do symulatorów",
      ogDescription: "Platformy motion i osprzęt do symulatorów dla fanów wyścigów i lotnictwa.",
      ogImage: "https://forgemotionsystems.com/images/og-pl.jpg",
      twitterTitle: "ForgeMotion Systems – Platformy motion i osprzęt do symulatorów",
      twitterDescription: "Platformy motion i osprzęt do symulatorów dla fanów wyścigów i lotnictwa.",
      twitterImage: "https://forgemotionsystems.com/images/twitter-pl.jpg",
      canonical: "https://forgemotionsystems.com/pl"
    }
  };

  function setMetaTag(key, content, attr = "name") {
    let tag = document.head.querySelector(`meta[${attr}="${key}"]`);
    if (!tag) {
      tag = document.createElement("meta");
      tag.setAttribute(attr, key);
      document.head.appendChild(tag);
    }
    tag.setAttribute("content", content);
  }

  function setCanonical(href) {
    let tag = document.head.querySelector('link[rel="canonical"]');
    if (!tag) {
      tag = document.createElement("link");
      tag.rel = "canonical";
      document.head.appendChild(tag);
    }
    tag.href = href;
  }

  const i18nNodes = Array.from(document.querySelectorAll("[data-en]"));

  function applyTexts(lang) {
    for (const el of i18nNodes) {
      const val = el.dataset[lang];
      if (typeof val === "string") el.textContent = val;
    }
  }

  function updateMetaTags(lang) {
    const data = metaData[lang];
    document.title = data.title;

    setMetaTag("description", data.description, "name");
    setMetaTag("keywords", data.keywords, "name");
    setMetaTag("author", "ForgeMotion Systems", "name");

    setCanonical(data.canonical);

    setMetaTag("og:title", data.ogTitle, "property");
    setMetaTag("og:description", data.ogDescription, "property");
    setMetaTag("og:image", data.ogImage, "property");
    setMetaTag("og:url", data.canonical, "property");
    setMetaTag("og:type", "website", "property");

    setMetaTag("twitter:title", data.twitterTitle, "name");
    setMetaTag("twitter:description", data.twitterDescription, "name");
    setMetaTag("twitter:image", data.twitterImage, "name");
    setMetaTag("twitter:card", "summary_large_image", "name");
  }

  function setLanguage(lang) {
    localStorage.setItem("lang", lang);
    document.documentElement.lang = lang;
    applyTexts(lang);
    updateMetaTags(lang);
  }

  document.addEventListener("click", (e) => {
    const btn = e.target.closest("[data-lang]");
    if (!btn) return;
    setLanguage(btn.getAttribute("data-lang"));
  });

  const savedLang = localStorage.getItem("lang") || "en";
  setLanguage(savedLang);
</script>

<script>
  (function () {
    const btn = document.getElementById('mobileMenuBtn');
    const menu = document.getElementById('mobileMenu');
    if (!btn || !menu) return;

    function closeMenu() {
      menu.classList.add('hidden');
      btn.setAttribute('aria-expanded', 'false');
    }

    function toggleMenu() {
      const isOpen = !menu.classList.contains('hidden');
      if (isOpen) closeMenu();
      else {
        menu.classList.remove('hidden');
        btn.setAttribute('aria-expanded', 'true');
      }
    }

    btn.addEventListener('click', toggleMenu);

    document.querySelectorAll('.mobile-link').forEach(a => {
      a.addEventListener('click', closeMenu);
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeMenu();
    });

    window.addEventListener('resize', () => {
      if (window.innerWidth >= 768) closeMenu();
    });
  })();
</script>

<script>
  (function () {
    const modal = document.getElementById('imgModal');
    const modalImg = document.getElementById('imgModalImg');
    const closeBtn = document.getElementById('imgModalClose');

    if (!modal || !modalImg || !closeBtn) return;

    function openModal(src, alt) {
      modalImg.src = src;
      modalImg.alt = alt || "Image preview";
      modal.classList.remove('modal-hidden');
      modal.setAttribute('aria-hidden', 'false');
      closeBtn.focus();
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.classList.add('modal-hidden');
      modal.setAttribute('aria-hidden', 'true');
      modalImg.src = "";
      modalImg.alt = "";
      document.body.style.overflow = '';
    }

    document.addEventListener('click', (e) => {
      const img = e.target.closest('.product-image img');
      if (!img) return;

      const full = img.getAttribute('data-full') || img.getAttribute('src');
      const alt = img.getAttribute('alt') || '';
      openModal(full, alt);
    });

    closeBtn.addEventListener('click', closeModal);

    modal.addEventListener('click', (e) => {
      if (e.target.classList.contains('modal-overlay')) closeModal();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal.getAttribute('aria-hidden') === 'false') {
        closeModal();
      }
    });
  })();
</script>

</body>
</html>
